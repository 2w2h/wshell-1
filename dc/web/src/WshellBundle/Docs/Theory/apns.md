### Основы

Apns - сервис для эффективной рассылки уведомлений на ios устройства.
Если устройство не доступно, данные временно хранятся в apns кэше (только 1 сообщение на устройство).

сам anps - это облако, которое отправляет клиентам уведомления (notifications), полученные от
сервера приложения.

Уведомления очень короткие и состоят из двух частей - device token(аналог - телефонный номер) и payload.
Payload в свою очередь это JSON объект, содержащий текст сообщения и его настройки.

Provider(сервер приложения) -> APNs (облако Apple) -> Devices (ios устройства). 

Apns имеет фидбэк, позволяющий отслеживать отправленые уведомления и сопроводительную инфу (например,
как давно установлено сообщение).

Apns должен аутентифицировать как сервер приложения, так и устройства.
Устройства аутентифицируются сами (самостоятельный обмен сертификатами), с сервером нужно
вручную устанавливать TLS peer-to-peer. Причем для каждого приложения должен быть свой сертификат.
Apns также хранит список отозванных сертификатов.

У каждого устройства есть device token, сгенерированный на apns на основе собственного сертификата
устройства и контекста. Этот токен передается в приложение, а затем - на сервер приложения.

### Рассылка

Чтобы передать уведомление, нужно отправить его на apns. (он тоже имеет свой сертификат), оно уже
отправит его нужным устройствам(как происходит выборка?)


Payload не может быть более 256 байт. Его структура следующая:

    aps
        alert (string OR dictionary)
            body (string) - сообщение
            action-loc-key (string OR null) - что написано на кнопке уведомления
            loc-key - ключ, по которому извлекаются данные из словарей локализации
            loc-args - значения, которыми будут заменены %@ в данных локализации
            launch-image - путь до кастомного изображения
        sound (string) - путь до кастомного звукового файла
        content-available (number)

Где *loc* - это настройки локализации уведомления.


C068EB58-5FA0-46A6-9518-27A050CE6166 - так приблизительно выглядит UUID
