sudo docker run -t ubuntu:latest /usr/bin/top
запускаем top в контейнере с последним образом ubuntu,
пробросив настройки терминала

sudo docker run -d --name firefox -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix kennethkl/firefox

-d - демонизирует контейнер
-e - проброс переменной окружения (для GUI)
--name - им вместо id
-v - проброс файла/каталога


sudo docker search nginx
поиск контейнера

sudo docker ps
список запущенных контейнеров


Изменения в конейнере можно закоммитать, чтобы они не пропали при перезапуске
sudo docker commit ID-контейнера ubuntu-nginx

Проброс порта
sudo docker run -d -p 8000:8000 fuel/nginx_6.0:latest /usr/local/bin/start.sh 

Запустить демонизированный sshd
sudo docker run -d -p 22 ubuntu-ssh /usr/sbin/sshd -D

Подключится к демонизированному контейнеру
sudo docker exec -ti ID-контейнера /bin/bash

Чтобы смотреть логи, нужно направить их в /dev/stdout, а затем:
sudo docker logs ID-контейнера
(там находиться накопленный stdout)

Ну или просто пробросить логи:
sudo mkdir /root/logs
sudo docker run -d -v /root/logs:/var/logs -p 80 ubuntu-nginx /usr/sbin/nginx

импорт/експорт контейнеров
sudo docker save -o ubuntu-nginx.img ubuntu-nginx
sudo docker load -i ubuntu-nginx.img


Всегда выноси часто изменяемые данные на хост-систему. Логи, базы данных,
каталоги с часто меняющимися файлами — все это не должно храниться
внутри контейнера (во-первых, усложняется администрирование, во-вторых,
при остановке контейнера данные потеряются). В идеале контейнер должен
содержать только код, конфиги и статичные файлы.

Не лепи новые слои при каждом изменении настроек или обновлении софта
внутри контейнера. Используй вместо этого Dockerfile для автоматической
сборки нового образа с обновлениями и измененными конфигами.

Вовремя вычищай завершенные и давно не используемые контейнеры, чтобы
избежать возможных конфликтов имен.

По возможности используй SkyDNS или dnsmasq. Их несложно поднять,
но они способны сэкономить уйму времени.

Внимательно изучи хелп по команде run (docker run --help), там много инте-
ресного и полезного




DOCKERFILE

FROM <имя-образа> — какой образ использовать
в качестве базы (должна быть первой строкой
в любом Dockerfile).
MAINTAINER <имя> — имя мейнтейнера данного
Dockerfile.
RUN <команда> — запустить указанную команду
внутри контейнера.
CMD <команда> — выполнить команду при запу-
ске контейнера (обычно идет последней).
EXPOSE <порт> — список портов, которые будет
слушать контейнер (используется механизмом
линковки).
ENV <ключ> <значение> — создать переменную
окружения.
ADD <путь> <путь> — скопировать файл/каталог
внутрь контейнера/образа (первый аргумент
может быть URL).
ENTRYPOINT <команда> — команда для запуска
приложения в контейнере (по умолчанию /bin/sh
-c).
VOLUME <путь> — пробросить в контейнер указан-
ный каталог (аналог опции -v).
USER <имя> — сменить юзера внутри контейнера.
WORKDIR <путь> — сменить каталог внутри кон-
тейнера.
ONBUILD [ИНСТРУКЦИЯ] — запустить указанную
инструкцию Dockerfile только в том случае, если
образ используется для сборки другого образа
(с помощью FROM).