WAMP -  протокол прикладного уровня для обмена сообщениями, основанный на вебсокетах

Реализует 2 шаблона обмена данными - Pub/Sub и RPC

RPC отлично использовать для исполнения команд на сервере.
Pub/Sub хорошо использовать для доступа к этим командам (+ подписка на события)
Так клиенты могут общаться между собой, используя сервер как "брокера".


### Единый роутинг для приложений

В обычной client server модели между сторонами есть тесная связь.
В Pub/Sub клиенты знают только "тему" (подписку), и брокера, через которого
идут все сообщения, и НЕ ЗНАЮТ о реализации друг друга.

В RPC вместо термина "брокер" используется "дилер".
Суть та же - создать абстракцию между клиентом  и API cервера.

т.е. WAMP = Router = Broker + Dealer.
WAMP имеет широкие возможности использования. Например,
у нас есть web-интерфейс, Arduino-устройство и Router.
С помощью RPC мы можем управлять устройством, а его сенсоры будут генерить
эвенты и через Pub/Sub публиковать там же или не только...

WAMP классически использует JSON для работы через web-сокеты,
но в принципе может использовать и другие протоколы (напр. MsgPack)


### Спецификация. Основы.

Peer - участник взаимодействия.
Realm - область видимости(wamp домен) для нескольких пиров.
Session - мост между 2 пирами в рамках wamp домена.
Transport - способ реализации сессии (обычно WebSocket)

Внутри транспорта можно организовать любую сериализацию.

Пир может быть клиентом (роли: Callee Caller Publisher Subscriber)
или сервером (роли: Dealer Broker)

Код приложения - находится на клиентах. Router НЕ ЗАПУСКАЕТ код приложения.
Маршрутизация не входит в спецификацию WAMP.


Блоки:
Идентификаторы ресурсов (URI) - Топики, Процедуры, Ошибки
com.myapp.mytopic1
com.myapp.myprocedure1
com.myapp.myerror1

// loose URI check
pattern = re.compile(r"^(([^\s\.#]+\.)|\.)*([^\s\.#]+)?$")
## strict URI check
pattern = re.compile(r"^(([0-9a-z_]{2,}\.)|\.)*([0-9a-z_]{2,})?$")

URI не должен начинаться с wamp (зарезервировано)

IDS: сессии, публикации (global scope)
    подписки, регистрации (router scope)
    запросы (session scope)

Все IDS лежат в диапозоне 0-2^53. Глобальные случайны, сессионные инкрементируются.

Сериализация должна, как минимум, поддерживать след. типы:
integer, string, bool, list, dict

### Спецификация. Допонительно.
